**インターネット通信の流れを、概略的かつ１つのストーリーとして掴んでいく。**

「このページを見たい」や「このファイルのダウンロードがしたい」といった要求 = **リクエスト**

このリクエストはルールに従って、通信される。
そのルールが**TCP/IP**というプロトコル

### TCP/IP
- 1974年に米国国防高等研究計画局(DARPA)によって定義された。
- インターネットを用いて通信を行う際の様々なルール
- 4つの通信の階層に分類し、役割を与えている。

#### アプリケーション層
- データを取り扱いを行う

#### トランスポート層
- 通信を行うプログラムの間でのデータ伝送を行う

#### インターネット層
- ネットワーク内でのデータの転送を行う

#### ネットワークインターフェース層
- 直接接続されたネットワーク（LANなど）内でのデータの転送を行う


## TCP/IPにおける通信の流れ
- ①　運搬に必要な情報をデータに付与する
- ②　そのデータを目的地まで運ぶ
- ③　到着後、付与された情報を紐解きつつ、データを指定アプリケーションまで届ける

#### ①を行うため
- アプリケーション層からネットワークインタフェース層へと順番にデータを下降させる。
- と同時に、それぞれの層で**ヘッダ**と呼ばれる情報を付与する。

#### ②を行うため
- ネットワーク層でルーターと呼ばれる機器を用いながら、データの転送を行う。

#### ③を行うため
- ネットワークインターフェース層からアプリケーション層へとデータを上昇させつつ、各ヘッダの情報を読み解き、指定のアプリケーションにデータを送り届ける。


## TCP/IPにおける通信の流れ①と各層の説明


### *アプリケーション層*
###### 「何を実現したいか」によって、異なるルール（プロトコル）が異なる。
- 例1) Webサービスでのデータのやりとり  ：  HTTPプロトコル
- 例2) メールを送る　：　SMTPプロトコル
- 例３) ファイル転送　：　FTPプロトコル
#### メッセージ
- アプリケーション層で発生したデータを「メッセージ」という。
- 通信方式を指示する。（詳細はトランスポート層でまとめる！）
- メッセージをトランスポート層に運ぶ。


### *トランスポート層*
###### プログラム間でのデータ伝送を行う。（２種類）
- TCP : 正確性重視でデータを送信するプロトコル。正確だが、遅い。
- UDP : 速度重視でデータを送信するプロトコル。早いが、正確性に欠ける。
- どちらの通信方式（プロトコル）かは、アプリケーション層からの指示による。
###### ヘッダ
- アプリケーション層からのデータに付与するもの
- 宛先のポート番号と送信元のポート番号などの情報が詰まったもの
- TCPヘッダ　：　TCP通信の時に付与されるヘッダ
- UDPヘッダ　：　UDP通信の時に付与されるヘッダ
#### セグメント
- メッセージ　＋　ヘッダ　＝　セグメント
- セグメントをネットワーク層へ運ぶ。


### *ネットワーク層*
###### ネットワーク内でデータを転送する。
- ネットワークにおける宛先となる**IPアドレス**が必要となる。
- 宛先のIPアドレスと送信元のIPアドレスが必要となる。
###### IPヘッダ
- IPアドレス情報や上位層のプロトコルタイプなどのデータ。
#### パケット
- IPヘッダ　＋　セグメント　＝　パケット
- パケットをネットワークインターフェース層へ運ぶ。


### *ネットワークインターフェース層*
###### イーサネット
- ネットワーク内でのデータ転送方法・プロトコル
- MACアドレスを用いて、データ転送を行っている。
###### ホスト
- イーサネットに繋がれた各端末
###### MACアドレス
- 各ホストの固有ID
###### イーサネットヘッダ
- 1階層上のプロトコルを示したイーサネットタイプ(TCP/IPの場合はIPプロトコル)
- 送信元MACアドレス
- 宛先MACアドレス
#### フレーム
- イーサネットヘッダ　＋　パケット　＝　フレーム
#### 電気信号に変換
- コンピューター内のデータ(0と1からなるデータ)と電気信号を変換するということ
- データ送信をする際、イーサネットヘッダが付与されたフレームは、まだコンピューター用のデータ
- これを実際の通信機器に流す前に、電気信号に変換する必要がある。



**ここでTCP/IPにおける通信の流れ①がやっと終わり！**
